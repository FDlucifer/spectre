#include "headers.h"

int tracer_func( int process_index, state_t state )
{
   if ( state == EXITING )
   {
      for ( int i = 0 ; i < MAX_TRACEABLE_HOSTS ; i++ )
      {
         if ( systems[ current_system( ) ].
                  traceable_hosts.ip_address[ i ][ 0 ] )
         {
            add_message( &systems[ current_system( ) ].
                           traceable_hosts.ip_address[ i ][ 0 ] );
         }
      }

      // Indicate that the process has ended.
      return 1;
   }

   // Indicate that the process is still running.
   return 0;
}

int sleeper_func( int process_index, state_t state )
{
   if ( state == EXITING )
   {
      int target_index = find_process( 
            systems[ current_system( ) ].processes.process[ process_index ].argument );

      if ( target_index != -1 )
      {
         systems[ current_system( ) ].processes.process[ target_index ].state = SLEEPING;
         systems[ current_system( ) ].processes.process[ target_index ].state_value = 7000;
      }

      return 1;
   }
   else
   {
      return 0;
   }
}
